<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>限时礼遇</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/personal.css">
    <link rel="stylesheet" href="js/iosselect/src/iosSelect.css">
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?b25bf95dd99f58452db28b1e99a1a46f";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>

<body>

    <div class="banner">
        <header>
            <img src="img/top.png" alt="">
        </header>
        <div class="card">
            <img src="img/card2.png" alt="">
        </div>


        <div class="nav">
            <div class="warp"></div>
            <div class="transform"></div>
            <div class="nav-word">
                <div class="identity">
                    <input class="input1" type="text" placeholder="姓名">
                    <input class="input2" type="text" placeholder="手机号">
                    <input class="input3" type="text" placeholder="身份证">
                    <!-- <input class="input4" id="showDom" type="text" placeholder="权益生效起始日期 年月日"> -->
                    <div id="selectDate">
                        <span data-year="" data-month="" data-date="" id="showDate">权益生效起始日期</span>
                    </div>

                </div>
                <div class="agree">
                    <input type="checkbox">
                    <div class="agree-nav">
                        &nbsp; &nbsp;&nbsp;&nbsp; 本人已认真阅读
                        <span>《七天会员服务手册》</span>和
                        <span>《重要告知与声明》</span>
                        并充分理解上述内容，认可相关服务条款，同意申请成为空间联盟会员。
                    </div>

                </div>
                <div class="button">
                    <img src="img/button.png" alt="">
                </div>
            </div>



        </div>

    </div>
    <div class="warp">
        <div class="warp-img">
            <div class="warp-btn">
                <button class="warp-btn1">权益查询</button>
                <button class="warp-btn2">再次领取</button>
        </div>
        </div>
        <!-- <img src="img/success.png" alt=""> -->
        
    </div>


</body>
<script src="js/iosselect/demo/datepicker/zepto.js"></script>
<script src="js/iosselect/src/iosSelect.js"></script>
<script src="node_modules/jquery/dist/jquery.min.js"></script>
<script src="js/payment.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
<script>   

    var selectDateDom = $('#selectDate');
    var showDateDom = $('#showDate');
    // 初始化时间
    var now = new Date();
    var nowYear = now.getFullYear();
    var nowMonth = now.getMonth() + 1;
    var monthData = []
    var nowDate = now.getDate();
    showDateDom.attr('data-year', nowYear);
    showDateDom.attr('data-month', nowMonth);
    showDateDom.attr('data-date', nowDate);
    // 数据初始化
    function formatYear(nowYear) {
        var arr = [];
        arr.push({
            id: nowYear + '',
            value: nowYear + '年'
        });
        if (nowMonth >= 10) {
            arr.push({
                id: nowYear + 1 + '',
                value: nowYear + 1 + '年'
            })
        }
        return arr;
    }
    function formatMonth(year) {
        var arr = [];
        if (year == nowYear) {
            for (var i = nowMonth; i <= 12; i++) {
                arr.push({
                    id: i + '',
                    value: i + '月'
                });
            }
        } else {
            for (var i = 1; i <= nowMonth + 3 - 12; i++) {
                arr.push({
                    id: i + '',
                    value: i + '月'
                });
            }
        }
        return arr;
    }
    function formatDate(month, count) {
        var arr = [];
        if (month == nowMonth) {
            for (var i = nowDate; i <= count; i++) {
                arr.push({
                    id: i + '',
                    value: i + '日'
                });
            }
        } else if (month == nowMonth + 3 || month == nowMonth - 9) {
            for (var i = 1; i < nowDate; i++) {
                arr.push({
                    id: i + '',
                    value: i + '日'
                });
            }
        } else {
            for (var i = 1; i <= count; i++) {
                arr.push({
                    id: i + '',
                    value: i + '日'
                });
            }
        }
        return arr;
    }
    var yearData = function (callback) {
        // settimeout只是模拟异步请求，真实情况可以去掉
        // setTimeout(function() {
        callback(formatYear(nowYear))
        // }, 2000)
    }
    var monthData = function (year, callback) {
        // settimeout只是模拟异步请求，真实情况可以去掉
        // setTimeout(function() {
        callback(formatMonth(year));
        // }, 2000);
    };
    var dateData = function (year, month, callback) {
        // settimeout只是模拟异步请求，真实情况可以去掉
        // setTimeout(function() {
        if (/^(1|3|5|7|8|10|12)$/.test(month)) {
            callback(formatDate(month, 31));
        }
        else if (/^(4|6|9|11)$/.test(month)) {
            callback(formatDate(month, 30));
        }
        else if (/^2$/.test(month)) {
            if (year % 4 === 0 && year % 100 !== 0 || year % 400 === 0) {
                callback(formatDate(month, 29));
            }
            else {
                callback(formatDate(month, 28));
            }
        }
        else {
            throw new Error('month is illegal');
        }
        // }, 2000);
        // ajax请求可以这样写
        /*
        $.ajax({
            type: 'get',
            url: '/example',
            success: function(data) {
                callback(data);
            }
        });
        */
    };
    selectDateDom.bind('click', function () {
        var oneLevelId = showDateDom.attr('data-year');
        var twoLevelId = showDateDom.attr('data-month');
        var threeLevelId = showDateDom.attr('data-date');
        var iosSelect = new IosSelect(3,
            [yearData, monthData, dateData],
            {
                title: '地址选择',
                itemHeight: 35,
                oneLevelId: oneLevelId,
                twoLevelId: twoLevelId,
                threeLevelId: threeLevelId,
                showLoading: true,
                callback: function (selectOneObj, selectTwoObj, selectThreeObj) {
                    showDateDom.attr('data-year', selectOneObj.id);
                    showDateDom.attr('data-month', selectTwoObj.id);
                    showDateDom.attr('data-date', selectThreeObj.id);
                    showDateDom.html(selectOneObj.value + ' ' + selectTwoObj.value + ' ' + selectThreeObj.value);
                }
            });
    });

    ; (function (doc, win, undefined) {
        var docEl = doc.documentElement,
            resizeEvt = 'orientationchange' in win ? 'orientationchange' : 'resize',
            recalc = function () {
                var clientWidth = docEl.clientWidth;
                if (clientWidth === undefined) return;
                docEl.style.fontSize = 20 * (clientWidth / 320) + 'px';
            };
        if (doc.addEventListener === undefined) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false)
    })(document, window);
</script>

</html>